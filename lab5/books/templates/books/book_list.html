{% extends "books/base.html" %}
{% block content %}


  <form method="get" class="inline">
    <label for="author">Filtruj wg autora:</label>
    <input id="author" name="author" value="{{ author_filter }}" placeholder="Imię Nazwisko" />
    <button class="btn" type="submit">Filtruj</button>
    {% if author_filter %}
      <a class="btn" href="{% url 'books:book-list' %}">Wyczyść</a>
    {% endif %}
  </form>

  <table>
    <thead>
      <tr>
        <th>Tytuł</th>
        <th>Autor</th>
        <th>Data wydania</th>
        <th>Akcje</th>
      </tr>
    </thead>

    <tbody>
      {% for book in books %}
      <tr>
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>{{ book.publication_date|date:"Y-m-d" }}</td>
        <td class="actions">
          <a href="{% url 'books:book-edit' book.pk %}">Edytuj</a>
          <a href="{% url 'books:book-delete' book.pk %}">Usuń</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">Brak książek do wyświetlenia.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  {% if is_paginated %}
    <div style="margin-top:12px;">
      {% if page_obj.has_previous %}
        <a href="?{% if author_filter %}author={{ author_filter }}&amp;{% endif %}page={{ page_obj.previous_page_number }}" class="btn">Poprzednia</a>
      {% endif %}
      <span>Strona {{ page_obj.number }} z {{ page_obj.paginator.num_pages }}</span>
      {% if page_obj.has_next %}
        <a href="?{% if author_filter %}author={{ author_filter }}&amp;{% endif %}page={{ page_obj.next_page_number }}" class="btn">Następna</a>
      {% endif %}
    </div>


  {% endif %}
{% endblock %}
